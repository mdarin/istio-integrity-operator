–î–∞, –≤—ã –≤–µ—Ä–Ω–æ –ø–æ–Ω–∏–º–∞–µ—Ç–µ —Å—Ç—Ä—É–∫—Ç—É—Ä—É –∏ –Ω–∞–∑–Ω–∞—á–µ–Ω–∏–µ —ç—Ç–æ–≥–æ `DestinationRule` –≤ Istio. –†–∞–∑–±–µ—Ä—ë–º –ø–æ —á–∞—Å—Ç—è–º:

---

### ‚úÖ **`host: reviews.prod.svc.cluster.local`**
- –≠—Ç–æ –ø–æ–ª–Ω–æ–µ DNS-–∏–º—è Kubernetes-—Å–µ—Ä–≤–∏—Å–∞ `reviews` –≤ –Ω–µ–π–º—Å–ø–µ–π—Å–µ `prod`.
- Istio –∏—Å–ø–æ–ª—å–∑—É–µ—Ç —ç—Ç–æ –∏–º—è –¥–ª—è —Å–æ–ø–æ—Å—Ç–∞–≤–ª–µ–Ω–∏—è –ø—Ä–∞–≤–∏–ª —Å —Ç—Ä–∞—Ñ–∏–∫–æ–º, –Ω–∞–ø—Ä–∞–≤–ª—è–µ–º—ã–º –∫ —ç—Ç–æ–º—É —Å–µ—Ä–≤–∏—Å—É.
- –£–∫–∞–∑–∞–Ω–∏–µ –ø–æ–ª–Ω–æ–≥–æ –¥–æ–º–µ–Ω–Ω–æ–≥–æ –∏–º–µ–Ω–∏ (`<service>.<namespace>.svc.cluster.local`) ‚Äî —Ä–µ–∫–æ–º–µ–Ω–¥—É–µ–º–∞—è –ø—Ä–∞–∫—Ç–∏–∫–∞.

---

### ‚úÖ **`subsets`**
- –û–ø—Ä–µ–¥–µ–ª—è—é—Ç **–ø–æ–¥–º–Ω–æ–∂–µ—Å—Ç–≤–∞** (–≤–µ—Ä—Å–∏–∏) –±—ç–∫–µ–Ω–¥–æ–≤ –Ω–∞ –æ—Å–Ω–æ–≤–µ **–ª–µ–π–±–ª–æ–≤ –ø–æ–¥–æ–≤**.
- –ù–∞–ø—Ä–∏–º–µ—Ä:
  - –ü–æ–¥—ã —Å –ª–µ–π–±–ª–æ–º `version: v1` –±—É–¥—É—Ç –æ—Ç–Ω–æ—Å–∏—Ç—å—Å—è –∫ subset `v1`.
  - –ü–æ–¥—ã —Å –ª–µ–π–±–ª–æ–º `version: v2` ‚Äî –∫ subset `v2`.
- –≠—Ç–∏ subset'—ã –∑–∞—Ç–µ–º –º–æ–≥—É—Ç –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å—Å—è –≤ `VirtualService` –¥–ª—è –º–∞—Ä—à—Ä—É—Ç–∏–∑–∞—Ü–∏–∏ (–Ω–∞–ø—Ä–∏–º–µ—Ä, 90% —Ç—Ä–∞—Ñ–∏–∫–∞ –Ω–∞ `v1`, 10% ‚Äî –Ω–∞ `v2`).

> ‚ö†Ô∏è –í–∞–∂–Ω–æ: –ª–µ–π–±–ª—ã —É–∫–∞–∑—ã–≤–∞—é—Ç—Å—è **–Ω–∞ –ø–æ–¥–∞—Ö**, –∞ –Ω–µ –Ω–∞ —Å–µ—Ä–≤–∏—Å–µ.

---

### ‚úÖ **`trafficPolicy.loadBalancer.simple: LEAST_CONN`**
- –≠—Ç–æ –ø–æ–ª–∏—Ç–∏–∫–∞ –±–∞–ª–∞–Ω—Å–∏—Ä–æ–≤–∫–∏ **–ø–æ —É–º–æ–ª—á–∞–Ω–∏—é** –¥–ª—è –≤—Å–µ—Ö —Ç—Ä–∞—Ñ–∏–∫–æ–≤, –∏–¥—É—â–∏—Ö –∫ `reviews.prod.svc.cluster.local`.
- `LEAST_CONN` –æ–∑–Ω–∞—á–∞–µ—Ç, —á—Ç–æ Istio –±—É–¥–µ—Ç –Ω–∞–ø—Ä–∞–≤–ª—è—Ç—å –∑–∞–ø—Ä–æ—Å –∫ —Ç–æ–º—É —ç–∫–∑–µ–º–ø–ª—è—Ä—É (–ø–æ–¥—É), —É –∫–æ—Ç–æ—Ä–æ–≥–æ **–Ω–∞–∏–º–µ–Ω—å—à–µ–µ –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ –∞–∫—Ç–∏–≤–Ω—ã—Ö —Å–æ–µ–¥–∏–Ω–µ–Ω–∏–π**.
- –≠—Ç–∞ –ø–æ–ª–∏—Ç–∏–∫–∞ –ø—Ä–∏–º–µ–Ω—è–µ—Ç—Å—è –∫–æ **–≤—Å–µ–º subset'–∞–º**, –µ—Å–ª–∏ –Ω–µ –ø–µ—Ä–µ–æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∞ –Ω–∞ —É—Ä–æ–≤–Ω–µ –∫–æ–Ω–∫—Ä–µ—Ç–Ω–æ–≥–æ subset.

> –ï—Å–ª–∏ –≤—ã —Ö–æ—Ç–∏—Ç–µ –∑–∞–¥–∞—Ç—å —Ä–∞–∑–Ω—ã–µ —Å—Ç—Ä–∞—Ç–µ–≥–∏–∏ –±–∞–ª–∞–Ω—Å–∏—Ä–æ–≤–∫–∏ –¥–ª—è —Ä–∞–∑–Ω—ã—Ö –≤–µ—Ä—Å–∏–π, –º–æ–∂–Ω–æ —É–∫–∞–∑–∞—Ç—å `trafficPolicy` –≤–Ω—É—Ç—Ä–∏ –∫–∞–∂–¥–æ–≥–æ subset.

---

### üìå –í—ã–≤–æ–¥
–í–∞—à `DestinationRule` –∫–æ—Ä—Ä–µ–∫—Ç–µ–Ω –∏ —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤—É–µ—Ç —Ç–∏–ø–∏—á–Ω–æ–º—É —à–∞–±–ª–æ–Ω—É Istio –¥–ª—è:
- –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∏—è –≤–µ—Ä—Å–∏–æ–Ω–∏—Ä–æ–≤–∞–Ω–Ω—ã—Ö –ø–æ–¥–º–Ω–æ–∂–µ—Å—Ç–≤ (–¥–ª—è –∫–∞–Ω–∞—Ä–µ–µ—á–Ω—ã—Ö —Ä–µ–ª–∏–∑–æ–≤, A/B-—Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è –∏ —Ç.–ø.);
- –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ –≥–ª–æ–±–∞–ª—å–Ω–æ–π –ø–æ–ª–∏—Ç–∏–∫–∏ –±–∞–ª–∞–Ω—Å–∏—Ä–æ–≤–∫–∏ –Ω–∞–≥—Ä—É–∑–∫–∏.

–ï—Å–ª–∏ —É –≤–∞—Å –µ—Å—Ç—å `VirtualService`, —Å—Å—ã–ª–∞—é—â–∏–π—Å—è –Ω–∞ `subsets` `v1`/`v2`, —Ç–æ –≤—Å—ë –±—É–¥–µ—Ç —Ä–∞–±–æ—Ç–∞—Ç—å –∫–∞–∫ –æ–∂–∏–¥–∞–µ—Ç—Å—è.

‚úÖ **–ò—Ç–æ–≥: –ø–æ–Ω–∏–º–∞–Ω–∏–µ –≤–µ—Ä–Ω–æ–µ.**